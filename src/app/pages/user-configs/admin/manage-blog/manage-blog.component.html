<div class="flex justify-between items-center mb-4">
  <h3 class="text-lg text-zinc-700">Gerenciar Blog</h3>
  <button
    pButton
    type="button"
    icon="pi pi-plus"
    label="Adicionar Post"
    class="!bg-emerald-800 hover:bg-emerald-900! !border-emerald-700"
    (click)="showAddPostModal = true"
  ></button>
</div>

<div class="flex gap-4 mb-2 mt-12 items-end">
  <!-- <p-floatlabel variant="on">
    <input
      pInputText
      id="name"
      type="text"
      [ngModel]="nome"
      (ngModelChange)="onNomeChange($event)"
      class="w-full!"
    />
    <label for="name">Busca pelo nome</label>
  </p-floatlabel>
  <p-floatlabel variant="on">
    <input
      pInputText
      id="email"
      type="email"
      [ngModel]="email"
      (ngModelChange)="onEmailChange($event)"
      class="w-full!"
    />
    <label for="email">Busca pelo email</label>
  </p-floatlabel> -->
  <!-- <div class="flex items-center gap-2">
    <input type="checkbox" id="somenteCompletos" [ngModel]="somenteCompletos" (ngModelChange)="onSomenteCompletosChange($event)" />
    <label for="somenteCompletos" class="text-sm text-zinc-600">Somente completos</label>
  </div> -->
  <!-- <div class="flex items-center gap-2">
    <label for="somenteCompletos" class="text-sm text-zinc-600">Somente cadastros completos</label>
    <p-toggleswitch
      [ngModel]="somenteCompletos"
      (ngModelChange)="onSomenteCompletosChange($event)"
    />
  </div> -->
  <!-- <p-floatlabel class="w-full md:w-56" variant="on">
    <p-select
      inputId="somente-completos"
      [options]="selectFilterOptions"
      optionLabel="label"
      optionValue="value"
      styleClass="w-full"
      size="small"
      [(ngModel)]="somenteCompletos"
      (ngModelChange)="onSomenteCompletosChange($event)"
    />
    <label for="somente-completos">Status</label>
  </p-floatlabel> -->
</div>
<p-panel showHeader="false">
  <p-table
    #dt
    [value]="posts() || []"
    [paginator]="true"
    [rows]="size"
    [lazy]="true"
    [totalRecords]="totalRecords"
    [loading]="loadingTable"
    stripedRows
    scrollable="true"
  >
    <ng-template pTemplate="header">
      <tr>
        <th class="min-w-48">Título</th>
        <th class="min-w-48">Data</th>
        <th class="min-w-48">Autor</th>
        <th class="min-w-48">Ações</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-customer>
      <tr>
        <td [title]="customer.title">{{ customer.title | truncate:35 }}</td>
        <td [title]="customer.date">{{ customer.date | truncate:35 }}</td>
        <td [title]="customer.author">{{ customer.author | truncate:35 }}</td>
        <td>
          <button
            pButton
            icon="pi pi-pencil"
            (click)="onEditPost(customer)"
            class="p-button-text mr-2"
          ></button>
          <button pButton icon="pi pi-eye" (click)="viewPost(customer.id)" class="p-button-text"></button>
          <button
            pButton
            icon="pi pi-trash"
            (click)="onDeletePost($event, customer.id)"
            class="p-button-text ml-2"
            [disabled]="loadingTable"
          ></button>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="4">Nenhuma publicação encontrada.</td>
      </tr>
    </ng-template>
  </p-table>

</p-panel>

<app-adicionar-post [isVisible]="showAddPostModal" (closed)="closeAddPostModal()"/>
<app-editar-post
  [isVisible]="showEditPostModal"
  [postData]="selectedPost"
  (closed)="closeEditPostModal()"
></app-editar-post>

<p-confirmdialog />
<p-toast />
